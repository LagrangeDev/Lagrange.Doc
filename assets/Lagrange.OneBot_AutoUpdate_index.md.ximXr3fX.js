import{_ as a,c as s,o as i,aj as e}from"./chunks/framework.CYX2e9KO.js";const u=JSON.parse('{"title":"自动更新","description":"","frontmatter":{},"headers":[],"relativePath":"Lagrange.OneBot/AutoUpdate/index.md","filePath":"Lagrange.OneBot/AutoUpdate/index.md","lastUpdated":1745549898000}'),t={name:"Lagrange.OneBot/AutoUpdate/index.md"},n=e(`<h1 id="自动更新" tabindex="-1">自动更新 <a class="header-anchor" href="#自动更新" aria-label="Permalink to &quot;自动更新&quot;">​</a></h1><p>自<a href="https://github.com/LagrangeDev/Lagrange.Core/commit/7ce94a451347e893a60d347ae38270180b61805f" target="_blank" rel="noreferrer">#810</a>以来,Lagrange.OneBot已实装了自动从GitHub Releases更新的功能, 该功能会在启动时检查更新, 如果有新版本, 会自动下载并替换当前版本. 默认情况下, 自动更新功能是关闭的, 你可以在配置文件中设置<code>EnableAutoUpdate</code>为<code>true</code>来启用它.</p><h2 id="配置文件" tabindex="-1">配置文件 <a class="header-anchor" href="#配置文件" aria-label="Permalink to &quot;配置文件&quot;">​</a></h2><p>每次启动时,如果当前目录不存在AutoUpdaterConfig.json文件, Lagrange会在当前目录下创建一个json文件, 你可以在其中设置自动更新的相关配置.</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   &quot;EnableAutoUpdate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 启用自动更新</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   &quot;CheckInterval&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">360</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 每360s检查一次更新,单位为秒</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   &quot;ProxyUrl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//访问Github的代理地址, 为空则不使用代理,和SignServer的ProxyUrl一样只接受http协议</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   &quot;LastUpdateTime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;2025-04-24T17:00:00Z&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //由程序自动生成的上次更新时间, 一般情况下请勿修改</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">注意</p><p>以 <code>//</code> 开头的为注释, 试图复制粘贴到实际的配置文件中时务必删除</p></div><h2 id="tips" tabindex="-1">Tips <a class="header-anchor" href="#tips" aria-label="Permalink to &quot;Tips&quot;">​</a></h2><ul><li>如果你在使用自动更新功能时遇到问题, 请检查你的网络连接和代理设置.</li><li>更新的配置文件不支持热重载, 你需要重启Lagrange才能使更改生效.</li><li>更新下载完毕后会自动强制重启Lagrange. 此举可能导致Docker容器内的Lagrange无法正常重启, 丢失生命周期等, 在Dockerfile中添加<code>--restart=always</code>参数可能可以解决该问题.</li><li>MacOS更新完毕需要手动信任新的二进制文件.</li><li>更新的临时文件放置在系统Temp目录下Lagrange.OneBot.AutoUpdate中, 你可以在更新完成后手动删除, 在每次自动更新后会自动删除上一次的更新文件.</li></ul>`,8),l=[n];function p(h,o,r,d,k,c){return i(),s("div",null,l)}const E=a(t,[["render",p]]);export{u as __pageData,E as default};
